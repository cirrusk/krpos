import { QzConnectionDeatil } from "./interface/qzconnection.interface";
import { PrinterConfigs } from "./interface/override.printerconfig.interface";
import { AbstractDriver } from "../common/abstract.driver";

declare var qz: any;

export class AbstractPrinterDriver extends AbstractDriver{
    // // Connection
    // protected promOpenConn: Promise<any>;
    // protected promCloseConn: Promise<any>;

    // // Version
    // protected promQzTrayVer: Promise<any>;

    // Printer Device
    protected promPrintersList: Promise<any>;

    // Not working...
    protected promDefaultPrinter: Promise<any>;

    constructor () {
        super('Printer');

        // this.promOpenConn = qz.websocket.connect();
        // this.promCloseConn = qz.websocket.disconnect();

        // this.promQzTrayVer = qz.api.getVersion();

        this.promPrintersList = qz.printers.find();

        // Not working...
        this.promDefaultPrinter = qz.printers.getDefault();
    }

    // protected isActiveConn(): boolean {
    //     return (qz.websocket.isActive()) ? true : false;
    // };

    // protected notActiveConn(): boolean {
    //     return this.isActiveConn() ? false : true;
    // }

    // protected getConnDetail(): QzConnectionDeatil {
    //     return qz.websocket.getConnectionInfo();
    // }

    // protected turnOnDebug(): void {
    //     qz.api.showDebug(true);
    // }

    // protected turnOffDebug(): void {
    //     qz.api.showDebug(false);
    // }

    protected createPrinterConfig(printerName: string, override: PrinterConfigs = null): any {
        return qz.configs.create(printerName, override);
    }

    protected setPrinterConfig(printerName: string, override: PrinterConfigs): any {
        return qz.configs.create(printerName, override);
    }
}